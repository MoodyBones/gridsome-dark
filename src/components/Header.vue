<template>
  <header
    class="navbar bg-theme-white bg-opacity-95 z-50 shadow-sm"
    :class="{ 'hidden-navbar': !showNavbar }"
  >
    <transition name="fade">
      <nav
        class="flex justify-between items-center py-3 px-5 sm:px-10 md:px-32 text-gray-800"
      >
        <g-link to="/" class="flex items-center">
          <svg
            class="w-24 h-24"
            width="175"
            height="120"
            viewBox="0 0 175 120"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0)" fill="#131313">
              <path
                d="M150.896 102.768c-3.243 0-6.059-.491-8.448-1.472-2.389-1.024-4.245-2.496-5.568-4.416l4.352-3.84c2.347 2.987 5.739 4.48 10.176 4.48 2.517 0 4.48-.448 5.888-1.344 1.451-.896 2.176-2.176 2.176-3.84 0-1.28-.405-2.155-1.216-2.624-.768-.512-1.749-.875-2.944-1.088l-4.8-.832a24.463 24.463 0 01-3.584-.896c-1.109-.384-2.091-.896-2.944-1.536a8.294 8.294 0 01-2.112-2.56c-.512-1.024-.768-2.283-.768-3.776 0-1.792.363-3.35 1.088-4.672a10.182 10.182 0 013.072-3.392c1.323-.939 2.859-1.621 4.608-2.048 1.749-.47 3.648-.704 5.696-.704 2.944 0 5.483.448 7.616 1.344 2.176.853 3.883 2.027 5.12 3.52l-4.224 4.032c-.64-.896-1.685-1.728-3.136-2.496s-3.371-1.152-5.76-1.152-4.224.427-5.504 1.28c-1.237.853-1.856 2.048-1.856 3.584 0 1.323.405 2.219 1.216 2.688.853.47 1.877.81 3.072 1.024l4.8.896c1.195.213 2.347.512 3.456.896 1.109.341 2.091.832 2.944 1.472.896.597 1.6 1.408 2.112 2.432.555.981.832 2.219.832 3.712 0 1.75-.363 3.328-1.088 4.736-.725 1.408-1.771 2.603-3.136 3.584-1.323.981-2.944 1.728-4.864 2.24-1.877.512-3.968.768-6.272.768zM118.856 103.768c-4.523 0-7.936-1.195-10.24-3.584-2.261-2.39-3.392-5.91-3.392-10.56 0-3.03.448-5.781 1.344-8.256.939-2.517 2.219-4.672 3.84-6.464a17.4 17.4 0 015.888-4.16c2.304-1.024 4.843-1.536 7.616-1.536 1.664 0 3.2.192 4.608.576 1.408.384 2.624.96 3.648 1.728a7.555 7.555 0 012.496 2.816c.597 1.11.896 2.39.896 3.84 0 1.237-.277 2.496-.832 3.776-.512 1.28-1.6 2.453-3.264 3.52-1.664 1.067-4.032 1.963-7.104 2.688-3.072.725-7.125 1.173-12.16 1.344a5.859 5.859 0 00-.064.832v.448c0 1.024.107 2.005.32 2.944a6.566 6.566 0 001.216 2.368c.555.683 1.301 1.216 2.24 1.6.981.384 2.219.576 3.712.576 1.067 0 2.027-.107 2.88-.32A8.859 8.859 0 00125 96.792c.811-.512 1.6-1.173 2.368-1.984.811-.853 1.664-1.899 2.56-3.136l4.48 2.88a30.036 30.036 0 01-2.88 3.84 17.237 17.237 0 01-3.456 2.88c-1.237.768-2.624 1.365-4.16 1.792-1.493.469-3.179.704-5.056.704zm4.416-29.376c-2.816 0-5.12.832-6.912 2.496-1.792 1.664-2.965 4.203-3.52 7.616l-.128.704c3.584-.128 6.421-.405 8.512-.832 2.133-.47 3.755-1.003 4.864-1.6 1.152-.64 1.877-1.323 2.176-2.048.341-.725.512-1.43.512-2.112 0-1.237-.427-2.24-1.28-3.008-.811-.81-2.219-1.216-4.224-1.216zM70.88 104l5.504-33.024h6.848l-1.344 7.808h.32c1.237-2.645 2.688-4.736 4.352-6.272 1.664-1.536 3.84-2.304 6.528-2.304 2.944 0 5.163.896 6.656 2.688 1.536 1.75 2.304 4.032 2.304 6.848 0 .768-.043 1.579-.128 2.432-.043.81-.171 1.77-.384 2.88L98.4 104h-6.848l3.2-19.2c.085-.597.17-1.216.256-1.856.085-.683.128-1.301.128-1.856 0-1.493-.384-2.752-1.152-3.776-.725-1.024-1.941-1.536-3.648-1.536-1.28 0-2.432.299-3.456.896-.981.597-1.899 1.408-2.752 2.432-.427.512-1.045 1.408-1.856 2.688-.768 1.28-1.301 2.795-1.6 4.544L77.728 104H70.88zM50.96 105.768c-2.176 0-4.096-.341-5.76-1.024-1.664-.683-3.072-1.621-4.224-2.816-1.11-1.237-1.963-2.71-2.56-4.416-.597-1.75-.896-3.69-.896-5.824 0-3.157.448-5.995 1.344-8.512.896-2.517 2.133-4.65 3.712-6.4a16.33 16.33 0 015.696-4.096c2.219-.981 4.608-1.472 7.168-1.472 2.176 0 4.096.341 5.76 1.024 1.664.683 3.05 1.643 4.16 2.88 1.152 1.195 2.027 2.667 2.624 4.416.597 1.75.896 3.67.896 5.76 0 3.157-.448 5.995-1.344 8.512-.896 2.517-2.155 4.672-3.776 6.464-1.579 1.749-3.477 3.115-5.696 4.096-2.176.939-4.544 1.408-7.104 1.408zm.448-5.44c2.688 0 4.843-.81 6.464-2.432 1.621-1.664 2.667-3.947 3.136-6.848l.704-4.224a28.7 28.7 0 00.192-1.664c.085-.512.128-.96.128-1.344 0-2.432-.64-4.224-1.92-5.376-1.237-1.195-2.944-1.792-5.12-1.792-2.688 0-4.843.832-6.464 2.496-1.621 1.621-2.667 3.883-3.136 6.784l-.704 4.224c-.085.597-.17 1.152-.256 1.664-.043.512-.064.96-.064 1.344 0 2.432.619 4.245 1.856 5.44 1.28 1.152 3.008 1.728 5.184 1.728zM20.064 119.568a6.82 6.82 0 01-2.496-.448c-.768-.299-1.557-.789-2.368-1.472-.768-.683-1.6-1.557-2.496-2.624a87.895 87.895 0 01-3.136-3.84l-3.264-3.968 4.608-3.648L19.872 114l.96-.32 5.888-35.136H13.728l.896-5.568h19.84l-6.336 38.016c-.47 2.688-1.344 4.779-2.624 6.272-1.237 1.536-3.05 2.304-5.44 2.304zm12.224-52.672c-1.621 0-2.752-.299-3.392-.896-.64-.64-.96-1.387-.96-2.24 0-.256.021-.555.064-.896.043-.341.107-.704.192-1.088.213-1.152.683-2.048 1.408-2.688.768-.683 1.963-1.024 3.584-1.024s2.752.32 3.392.96c.64.597.96 1.323.96 2.176 0 .256-.021.555-.064.896-.043.341-.107.704-.192 1.088-.213 1.152-.704 2.07-1.472 2.752-.725.64-1.899.96-3.52.96zM118.512 47.768c-2.133 0-3.691-.533-4.672-1.6-.939-1.067-1.408-2.496-1.408-4.288 0-.853.128-1.963.384-3.328l6.4-33.344h-10.88l.96-5.568h17.856l-8.128 42.112 1.344.448 11.392-10.304 3.84 3.52-5.504 5.376c-1.365 1.323-2.581 2.432-3.648 3.328-1.067.896-2.048 1.621-2.944 2.176-.896.512-1.749.875-2.56 1.088a8.037 8.037 0 01-2.432.384zM91.856 47.768c-4.523 0-7.936-1.195-10.24-3.584-2.261-2.39-3.392-5.91-3.392-10.56 0-3.03.448-5.781 1.344-8.256.939-2.517 2.219-4.672 3.84-6.464a17.397 17.397 0 015.888-4.16c2.304-1.024 4.843-1.536 7.616-1.536 1.664 0 3.2.192 4.608.576 1.408.384 2.624.96 3.648 1.728a7.555 7.555 0 012.496 2.816c.597 1.11.896 2.39.896 3.84 0 1.237-.277 2.496-.832 3.776-.512 1.28-1.6 2.453-3.264 3.52-1.664 1.067-4.032 1.963-7.104 2.688-3.072.725-7.125 1.173-12.16 1.344a5.903 5.903 0 00-.064.832v.448c0 1.024.107 2.005.32 2.944a6.57 6.57 0 001.216 2.368c.555.683 1.301 1.216 2.24 1.6.981.384 2.219.576 3.712.576 1.067 0 2.027-.107 2.88-.32A8.859 8.859 0 0098 40.792c.81-.512 1.6-1.173 2.368-1.984.811-.853 1.664-1.899 2.56-3.136l4.48 2.88a30.036 30.036 0 01-2.88 3.84 17.227 17.227 0 01-3.456 2.88c-1.237.768-2.624 1.365-4.16 1.792-1.493.47-3.179.704-5.056.704zm4.416-29.376c-2.816 0-5.12.832-6.912 2.496-1.792 1.664-2.965 4.203-3.52 7.616l-.128.704c3.584-.128 6.421-.405 8.512-.832 2.133-.47 3.755-1.003 4.864-1.6 1.152-.64 1.877-1.323 2.176-2.048.341-.725.512-1.43.512-2.112 0-1.237-.427-2.24-1.28-3.008-.81-.81-2.219-1.216-4.224-1.216zM38.128 49l5.504-33.024h5.824l-.896 5.44h.32c.768-1.792 1.707-3.264 2.816-4.416 1.152-1.195 2.624-1.792 4.416-1.792 1.792 0 3.115.576 3.968 1.728.896 1.152 1.259 2.71 1.088 4.672h.256c.81-1.92 1.835-3.456 3.072-4.608 1.28-1.195 2.901-1.792 4.864-1.792 1.877 0 3.285.533 4.224 1.6.981 1.067 1.472 2.624 1.472 4.672 0 .64-.043 1.43-.128 2.368a35.966 35.966 0 01-.32 2.496L70.832 49h-5.824l3.648-21.824c.085-.597.17-1.237.256-1.92a14.01 14.01 0 00.128-1.664c0-2.09-.832-3.136-2.496-3.136-1.45 0-2.667.79-3.648 2.368-.47.768-.896 1.621-1.28 2.56a12.608 12.608 0 00-.832 2.816L57.328 49h-5.824l3.712-22.144a28.7 28.7 0 00.192-1.664c.085-.555.128-1.067.128-1.536 0-2.133-.768-3.2-2.304-3.2-1.45 0-2.71.79-3.776 2.368-.555.81-.981 1.664-1.28 2.56a20.095 20.095 0 00-.704 2.496L43.952 49h-5.824z"
              />
            </g>
            <defs>
              <clipPath id="clip0">
                <path fill="#fff" d="M0 0h175v120H0z" />
              </clipPath>
            </defs>
          </svg>
          <div class="pl-5 md:pl-8 tracking-widest">
            Front-end Developer
          </div>
        </g-link>
        <div class="contact flex ">
          <Smiley
            class="smiley w-8 h-8 mr-3 opacity-0 transition-opacity ease-in duration-150"
          />
          <a
            class="link uppercase text-lg tracking-wide "
            :href="`mailto:${data.email}`"
            >say hi !</a
          >
          <a
            href="#"
            v-scroll-to="'#work-section'"
            class="link uppercase text-lg tracking-wide ml-4 md:ml-16"
          >
            work
          </a>
        </div>
      </nav>
    </transition>
  </header>
</template>

<script>
import data from '@/data/theme.json'
import Smiley from '@/assets/smiley.svg'

export default {
  name: 'Header',
  data() {
    return {
      data,
      showNavbar: true,
      lastScrollPosition: 0,
    }
  },
  components: {
    Smiley,
  },
  mounted() {
    window.addEventListener('scroll', this.onScroll)
  },
  beforeDestroy() {
    window.removeEventListener('scroll', this.onScroll)
  },
  methods: {
    onScroll() {
      // Get the current scroll position
      const currentScrollPosition =
        window.pageYOffset || document.documentElement.scrollTop

      // Because of momentum scrolling on mobiles, we shouldn't continue if it is less than zero
      if (currentScrollPosition < 0) {
        return
      }
      // Stop executing this function if the difference between
      // current scroll position and last scroll position is less than some offset
      if (Math.abs(currentScrollPosition - this.lastScrollPosition) < 60) {
        return
      }

      // Here we determine whether we need to show or hide the navbar
      this.showNavbar = currentScrollPosition < this.lastScrollPosition

      // Set the current scroll position as the last scroll position
      this.lastScrollPosition = currentScrollPosition
    },
  },
}
</script>

<style lang="scss" scoped>
.navbar {
  height: 100px;
  width: 100vw;
  position: fixed;
  /* box-shadow: 0 2px 15px rgba(71, 120, 120, 0.5); */
  transform: translate3d(0, 0, 0);
  transition: 0.1s all ease-out;
}

.navbar.hidden-navbar {
  box-shadow: none;
  transform: translate3d(0, -100%, 0);
}

.contact {
  &:hover {
    .smiley {
      @apply opacity-100;
    }
  }
}
</style>
